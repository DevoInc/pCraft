ami_version 1

$globalvar = "my global variable"

action FieldAssignment {
       field["CommandLine"] = "foo"
       exec FieldAssignement
}

repeat 3 as $myvar {
       action FieldReplacement {
       	      field["ip"].replace("127.0.0.1" => "192.168.0.32", "172.16.0.32" => "192.168.0.55")
	      exec FieldReplacement
       }

       action FieldAssignment {
       	      field["CommandLine"] = "foo"
	      exec FieldAssignement
       }
}

sleep 0.42

action GlobalVar {      
       exec GlobalVar
}

sleep 10

action LocalVar {
       $localvar = "mylocalvar"
       $localfromglobal = $globalvar
       $fromanotherlocal = $localvar
       exec LocalVar
}

repeat 2 as $counter {
       action RunFunctions {
       	      $fromcsv = csv("test.csv", $counter, "second", header=1)
	      $rc4var = crypto.rc4("my key", "my data string")
	      $b64e = base64.encode("Please encode this string")
	      $uuidv4 = uuid.v4("")
	      $uuidv5 = uuid.v5("Same String")
	      $randint = random.int(5,42)
	      exec RunFunctions
       }
}

